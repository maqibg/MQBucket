# Bucket Status Dashboard

## æ¦‚è¿°

MQBucket ç°åœ¨æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„çŠ¶æ€çœ‹æ¿ï¼Œç”¨äºç›‘æ§æ‰€æœ‰åº”ç”¨çš„ç‰ˆæœ¬æ›´æ–°æƒ…å†µã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°ï¼ˆP0 é˜¶æ®µï¼‰

- **ç»Ÿè®¡å¡ç‰‡**ï¼šæ˜¾ç¤ºæœ€æ–°/éœ€æ›´æ–°/å¤±è´¥çš„åº”ç”¨æ•°é‡
- **æœç´¢è¿‡æ»¤**ï¼šæŒ‰åº”ç”¨åç§°æˆ–æè¿°æœç´¢
- **çŠ¶æ€ç­›é€‰**ï¼šæŒ‰çŠ¶æ€ï¼ˆå…¨éƒ¨/æœ€æ–°/éœ€æ›´æ–°/å¤±è´¥ï¼‰ç­›é€‰
- **æ’åºåŠŸèƒ½**ï¼šæŒ‰åç§°/çŠ¶æ€/è€—æ—¶æ’åº
- **è¯¦æƒ…å±•ç¤º**ï¼šæŸ¥çœ‹æ¯ä¸ªåº”ç”¨çš„æ£€æµ‹æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- **å¤åˆ¶å®‰è£…å‘½ä»¤**ï¼šä¸€é”®å¤åˆ¶ `scoop install` å‘½ä»¤
- **è‡ªåŠ¨åŒ–æ£€æµ‹**ï¼šGitHub Actions æ¯æ—¥è‡ªåŠ¨æ£€æµ‹å¹¶æ›´æ–°çŠ¶æ€

### ğŸš§ è®¡åˆ’ä¸­ï¼ˆP1-P3 é˜¶æ®µï¼‰

- æœ¬åœ°å®æ—¶æ£€æµ‹æ¨¡å¼
- ä¸€é”®æ£€æµ‹å…¨éƒ¨/å•ç‹¬æ£€æµ‹
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- æ›´è¯¦ç»†çš„å¤±è´¥åŸå› åˆ†ç±»

## ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹åœ¨çº¿çŠ¶æ€çœ‹æ¿

è®¿é—® GitHub Pagesï¼š`https://maqibg.github.io/MQBucket/`

çŠ¶æ€æ•°æ®æ¯å¤© UTC 02:00 è‡ªåŠ¨æ›´æ–°ã€‚

### æœ¬åœ°ç”ŸæˆçŠ¶æ€

å¦‚æœä½ æ˜¯ç»´æŠ¤è€…ï¼Œå¯ä»¥åœ¨æœ¬åœ°ç”Ÿæˆæœ€æ–°çŠ¶æ€ï¼š

```bash
# ç¡®ä¿å·²å®‰è£… Scoop
pwsh -File scripts/generate-status.ps1 -BucketDir bucket -OutFile public/status.json

# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨æŸ¥çœ‹
cd public
python -m http.server 8080
# è®¿é—® http://localhost:8080
```

### æ‰‹åŠ¨è§¦å‘ CI æ£€æµ‹

1. è®¿é—® [Actions é¡µé¢](https://github.com/maqibg/MQBucket/actions/workflows/bucket-status.yml)
2. ç‚¹å‡» "Run workflow"
3. ç­‰å¾…å‡ åˆ†é’Ÿååˆ·æ–° Pages é¡µé¢

## æŠ€æœ¯æ¶æ„

### æ•°æ®æ¨¡å‹

çŠ¶æ€æ•°æ®å­˜å‚¨åœ¨ `public/status.json`ï¼ŒåŒ…å«ï¼š
- æ±‡æ€»ç»Ÿè®¡ï¼ˆæ€»æ•°/æœ€æ–°/éœ€æ›´æ–°/å¤±è´¥ï¼‰
- æ¯ä¸ªåº”ç”¨çš„è¯¦ç»†ä¿¡æ¯ï¼ˆç‰ˆæœ¬/çŠ¶æ€/æ£€æµ‹æ—¥å¿—ï¼‰
- å…ƒæ•°æ®ï¼ˆç”Ÿæˆæ—¶é—´/æ•°æ®æº/Git ä¿¡æ¯ï¼‰

Schema å®šä¹‰ï¼š`public/status.schema.json`

### å·¥ä½œæµ

1. **GitHub Actions**ï¼ˆ`.github/workflows/bucket-status.yml`ï¼‰
   - å®šæ—¶è§¦å‘ï¼šæ¯å¤© UTC 02:00
   - æ‰‹åŠ¨è§¦å‘ï¼šworkflow_dispatch
   - ç”Ÿæˆ status.json å¹¶éƒ¨ç½²åˆ° Pages

2. **çŠ¶æ€ç”Ÿæˆå™¨**ï¼ˆ`scripts/generate-status.ps1`ï¼‰
   - è¯»å–æ‰€æœ‰ manifest æ–‡ä»¶
   - è°ƒç”¨ Scoop checkver.ps1 æ£€æµ‹ç‰ˆæœ¬
   - è§£æè¾“å‡ºå¹¶ç”Ÿæˆç»“æ„åŒ– JSON

3. **UI ç•Œé¢**ï¼ˆ`bucket-index.html`ï¼‰
   - åŠ è½½ status.json
   - æä¾›æœç´¢/ç­›é€‰/æ’åºåŠŸèƒ½
   - å±•ç¤ºç»Ÿè®¡å¡ç‰‡å’Œåº”ç”¨åˆ—è¡¨

## æ–‡ä»¶ç»“æ„

```
.github/workflows/
  bucket-status.yml          # CI å·¥ä½œæµ
scripts/
  generate-status.ps1        # çŠ¶æ€ç”Ÿæˆå™¨
public/
  status.schema.json         # JSON Schema
  status.json                # ç”Ÿæˆçš„çŠ¶æ€æ•°æ®ï¼ˆCI ç”Ÿæˆï¼‰
bucket-index.html            # UI ç•Œé¢
```

## å¼€å‘æŒ‡å—

### ä¿®æ”¹ UI

ç›´æ¥ç¼–è¾‘ `bucket-index.html`ï¼Œæ‰€æœ‰æ ·å¼å’Œè„šæœ¬éƒ½åœ¨å•æ–‡ä»¶ä¸­ã€‚

### ä¿®æ”¹ç”Ÿæˆé€»è¾‘

ç¼–è¾‘ `scripts/generate-status.ps1`ï¼Œæ³¨æ„ï¼š
- ä¿æŒ status.json schema å…¼å®¹æ€§
- é™åˆ¶æ—¥å¿—é•¿åº¦ï¼ˆé»˜è®¤ 8KBï¼‰
- å¤„ç†å„ç§ checkver è¾“å‡ºæ ¼å¼

### æµ‹è¯•

```bash
# ç”ŸæˆçŠ¶æ€
pwsh -File scripts/generate-status.ps1

# éªŒè¯ JSON æ ¼å¼
Get-Content public/status.json | ConvertFrom-Json

# æœ¬åœ°é¢„è§ˆ
cd public && python -m http.server 8080
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šstatus.json æœªç”Ÿæˆ

æ£€æŸ¥ï¼š
1. Scoop æ˜¯å¦å·²å®‰è£…
2. `SCOOP_HOME` ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
3. `bin/checkver.ps1` æ˜¯å¦å­˜åœ¨

### é—®é¢˜ï¼šUI æ˜¾ç¤º"æ— æ³•åŠ è½½æ•°æ®"

æ£€æŸ¥ï¼š
1. `public/status.json` æ˜¯å¦å­˜åœ¨
2. JSON æ ¼å¼æ˜¯å¦æ­£ç¡®
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜ï¼šæŸäº›åº”ç”¨æ£€æµ‹å¤±è´¥

æŸ¥çœ‹è¯¦æƒ…é¢æ¿ä¸­çš„æ—¥å¿—ï¼Œå¸¸è§åŸå› ï¼š
- ç½‘ç»œé—®é¢˜ï¼ˆCORS/è¶…æ—¶ï¼‰
- checkver é…ç½®é”™è¯¯
- ä¸Šæ¸¸ API å˜æ›´
- GitHub API é™æµ

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

ä¸ä¸»ä»“åº“ç›¸åŒã€‚
